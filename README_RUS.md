# decimal.h
### Реализация библиотеки d3_decimal.h на языке программирования С. Эта библиотека добавляет возможность работы с типом "decimal", которого нет в стандарте языка. Она используется, например, для финансовых расчетов.

   Это образовательный проект, поэтому он больше не поддерживается!

## Важные примечания

 - Библиотека, разработанная на языке Си стандарта C11 с использованием компилятора gcc в качестве статической библиотеки с заголовочными файлами d3_decimal.h(смотрите цель `d3_decimal.a` в Makefile).
 - Код библиотеки должен находиться в папке src в ветке develop.
 - При написании кода необходимо придерживаться Google Style. Унаследованные и устаревшие функции не используются в соответствии со стандартом POSIX.1-2017 (см. цель "clang" в Makefile).
 - Integration tests covered all of the library's functions by unit-tests using the `check.h` library. Unit-tests checks the results of implementation by comparing them with the implementation of the standard decimal.h library(see `test` goal in Makefile). 
 - Интеграционные тесты охватывали все функции библиотеки с помощью модульных тестов с использованием библиотеки "check.h`. Модульные тесты проверяют результаты реализации, сравнивая их с реализацией стандартной библиотеки decimal.h (см. цель `test` в Makefile).
 - В программах, разработанных в соответствии с принципами структурированного программирования, избегается дублирование в коде.
- Конечные нули сохраняются как удаленные (за исключением функции `truncate`)
- Определенный тип должен поддерживать числа из -79,228,162,514,264,337,593,543,950,335 to +79,228,162,514,264,337,593,543,950,335.

## Информация

Тип Decimal представляет десятичные числа в диапазоне от положительных 79,228,162,514,264,337,593,543,950,335 до отрицательных 79,228,162,514,264,337,593,543,950,335. Значение Decimal по умолчанию равно 0. Decimal подходит для финансовых расчетов, которые требуют большого количества значимых целых и дробных цифр и отсутствия ошибок округления. Этот тип не устраняет необходимость округления. Скорее, сводит к минимуму количество ошибок из-за него.
Когда результат деления и умножения передается методу округления, результат не страдает от потери точности.
Decimal число - это значение с плавающей точкой, состоящее из знака, числового значения, где каждая цифра находится в диапазоне от 0 до 9, и коэффициента масштабирования, который указывает положение десятичной точки, разделяющей целые и дробные части числового значения.
Двоичное представление Decimal состоит из 1-разрядного знака, 96-разрядного целого числа и коэффициента масштабирования, используемого для деления 96-разрядного целого числа и указания того, какая его часть является десятичной дробью. Коэффициент масштабирования неявно равен числу 10, возведенному в степень в диапазоне от 0 до 28. Следовательно, двоичное представление Decimal имеет вид ((от -2^96 до 2^96) / 10^(от 0 до 28)), где -(2^96-1) равно минимальному значению, а 2^96-1 равно максимальному значению.
Коэффициент масштабирования также может сохранять любые конечные нули в Decimal. Эти конечные нули не влияют на значение в арифметических операциях или операциях сравнения.

### Двоичное представление 

Двоичное представление Decimal состоит из 1-разрядного знака, 96-разрядного целого числа и коэффициента масштабирования, используемого для деления целого числа и указания того, какая его часть является десятичной дробью. Коэффициент масштабирования неявно равен числу 10, возведенному в степень в диапазоне от 0 до 28.

Decimal число может быть реализовано в виде четырехэлементного массива 32-разрядных целых чисел со знаком (`int bits[4];`).

`bits[0]`, `bits[1]`, и `bits[2]` содержат младшие, средние и старшие 32 бита 96-разрядного целого числа соответственно.

`bits[3]` содержит коэффициент масштабирования и знак, и состоит из следующих частей:
- Биты от 0 до 15, младшее слово, не используются и должны быть равны нулю;
- Биты с 16 по 23 должны содержать показатель степени от 0 до 28, который указывает степень 10 для разделения целого числа;
- Биты с 24 по 30 не используются и должны быть равны нулю;
- Бит 31 содержит знак; 0 означает положительный, а 1 означает отрицательный.

Обрати внимание, что битовое представление различает отрицательные и положительные нули. Эти значения могут считаться эквивалентными во всех операциях.


### Пример:

```c
typedef struct 
{
    int bits[4];
} d3_decimal;
```

## Все, что было реализовано в библиотеке decimal.h, расположено ниже:

### Арифметические операторы

- Сложение
- Вычитание
- Умножение
- Деление
- Modul/Mod

- *При получении чисел, которые не вписываются в мантиссу во время арифметических операций, используйте банковское округление (например, 79,228,162,514,264,337,593,543,950,335 - 0.6 = 79,228,162,514,264,337,593,543,950,334)*

### Операторы сравнения

- Меньше | <
- Меньше или равно | <=
- Больше | >
- Больше или равно | >=
- Равно | ==
- Не равно | !=

### Преобразователи 

- From int
- From float
- To int
- To float

*Примечание по преобразованию числа типа float:*
- *Если числа слишком малы (0 < |x| < 1e-28), верните ошибку и значение, равное 0*
- *Если числа слишком велики (|x| > 79,228,162,514,264,337,593,543,950,335) или равны бесконечности, верните сообщение об ошибке*
- *При обработке числа с типом float преобразуйте все значащие десятичные разряды, содержащиеся в нем. Если таких цифр более 7, число округляется до ближайшего значения, в котором не более 7 значащих десятичных разрядов.*

*Обратите внимание на преобразование из десятичного типа в int:*
- *Если в десятичном числе есть дробная часть, ее следует отбросить (например, 0,9 преобразуется в 0)*


### Другие функции

Округляет указанное Decimal число до ближайшего целого числа в сторону отрицательной бесконечности.
Округляет Decimal до ближайшего целого числа.
Возвращает целые цифры указанного Decimal числа; любые дробные цифры отбрасываются, включая конечные нули.
Возвращает результат умножения указанного Decimal на -1.

